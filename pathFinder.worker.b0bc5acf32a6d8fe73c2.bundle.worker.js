/*! For license information please see pathFinder.worker.b0bc5acf32a6d8fe73c2.bundle.worker.js.LICENSE.txt */
(()=>{"use strict";const e=Symbol("Comlink.proxy"),t=Symbol("Comlink.endpoint"),r=Symbol("Comlink.releaseProxy"),s=Symbol("Comlink.finalizer"),n=Symbol("Comlink.thrown"),i=e=>"object"==typeof e&&null!==e||"function"==typeof e,a=new Map([["proxy",{canHandle:t=>i(t)&&t[e],serialize(e){const{port1:t,port2:r}=new MessageChannel;return o(e,t),[r,[r]]},deserialize:e=>(e.start(),g(e,[],undefined))}],["throw",{canHandle:e=>i(e)&&n in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function o(t,r=globalThis,i=["*"]){r.addEventListener("message",(function a(h){if(!h||!h.data)return;if(!function(e,t){for(const r of e){if(t===r||"*"===r)return!0;if(r instanceof RegExp&&r.test(t))return!0}return!1}(i,h.origin))return void console.warn(`Invalid origin '${h.origin}' for comlink proxy`);const{id:u,type:l,path:d}=Object.assign({path:[]},h.data),g=(h.data.argumentList||[]).map(v);let f;try{const r=d.slice(0,-1).reduce(((e,t)=>e[t]),t),s=d.reduce(((e,t)=>e[t]),t);switch(l){case"GET":f=s;break;case"SET":r[d.slice(-1)[0]]=v(h.data.value),f=!0;break;case"APPLY":f=s.apply(r,g);break;case"CONSTRUCT":f=function(t){return Object.assign(t,{[e]:!0})}(new s(...g));break;case"ENDPOINT":{const{port1:e,port2:r}=new MessageChannel;o(t,r),f=function(e,t){return p.set(e,t),e}(e,[e])}break;case"RELEASE":f=void 0;break;default:return}}catch(e){f={value:e,[n]:0}}Promise.resolve(f).catch((e=>({value:e,[n]:0}))).then((e=>{const[n,i]=y(e);r.postMessage(Object.assign(Object.assign({},n),{id:u}),i),"RELEASE"===l&&(r.removeEventListener("message",a),c(r),s in t&&"function"==typeof t[s]&&t[s]())})).catch((e=>{const[t,s]=y({value:new TypeError("Unserializable return value"),[n]:0});r.postMessage(Object.assign(Object.assign({},t),{id:u}),s)}))})),r.start&&r.start()}function c(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function h(e){if(e)throw new Error("Proxy has been released and is not useable")}function u(e){return m(e,{type:"RELEASE"}).then((()=>{c(e)}))}const l=new WeakMap,d="FinalizationRegistry"in globalThis&&new FinalizationRegistry((e=>{const t=(l.get(e)||0)-1;l.set(e,t),0===t&&u(e)}));function g(e,s=[],n=function(){}){let i=!1;const a=new Proxy(n,{get(t,n){if(h(i),n===r)return()=>{!function(e){d&&d.unregister(e)}(a),u(e),i=!0};if("then"===n){if(0===s.length)return{then:()=>a};const t=m(e,{type:"GET",path:s.map((e=>e.toString()))}).then(v);return t.then.bind(t)}return g(e,[...s,n])},set(t,r,n){h(i);const[a,o]=y(n);return m(e,{type:"SET",path:[...s,r].map((e=>e.toString())),value:a},o).then(v)},apply(r,n,a){h(i);const o=s[s.length-1];if(o===t)return m(e,{type:"ENDPOINT"}).then(v);if("bind"===o)return g(e,s.slice(0,-1));const[c,u]=f(a);return m(e,{type:"APPLY",path:s.map((e=>e.toString())),argumentList:c},u).then(v)},construct(t,r){h(i);const[n,a]=f(r);return m(e,{type:"CONSTRUCT",path:s.map((e=>e.toString())),argumentList:n},a).then(v)}});return function(e,t){const r=(l.get(t)||0)+1;l.set(t,r),d&&d.register(e,t,e)}(a,e),a}function f(e){const t=e.map(y);return[t.map((e=>e[0])),(r=t.map((e=>e[1])),Array.prototype.concat.apply([],r))];var r}const p=new WeakMap;function y(e){for(const[t,r]of a)if(r.canHandle(e)){const[s,n]=r.serialize(e);return[{type:"HANDLER",name:t,value:s},n]}return[{type:"RAW",value:e},p.get(e)||[]]}function v(e){switch(e.type){case"HANDLER":return a.get(e.name).deserialize(e.value);case"RAW":return e.value}}function m(e,t,r){return new Promise((s=>{const n=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.addEventListener("message",(function t(r){r.data&&r.data.id&&r.data.id===n&&(e.removeEventListener("message",t),s(r.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:n},t),r)}))}o(new class{constructor(){this.vertices=new Map,this.edges=new Map,this.edgesByVertex=new Map,this.heuristics={euclidian:this.heuristicEuclidian,manhattan:this.heuristicManhattan,chebyshev:this.heuristicChebyshev,octile:this.heuristicOctile}}createVertex(e,t,r,s){if(this.vertices.has(e))throw new Error(`Vertex with id ${e} already exists`);const n={id:e,data:s,x:t,y:r};return this.vertices.set(e,n),this.edgesByVertex.set(e,[]),n}removeVertex(e){if(!this.vertices.delete(e))return!1;const t=this.edgesByVertex.get(e);return this.edgesByVertex.delete(e),!t||(t.forEach((e=>this.edges.delete(e.id))),!0)}removeAllVertices(){let e=!0;return this.vertices.forEach((t=>{this.removeVertex(t.id)||(e=!1)})),e&&0===this.vertices.size&&0===this.edges.size}getNeighbourVertices(e){const t=this.edgesByVertex.get(e);if(!t)return[];const r=[];return t.forEach((t=>{const s=t.vertA===e?t.vertB:t.vertA,n=this.vertices.get(s);n&&r.push(n)})),r}createEdge(e,t,r,s){const n={id:`${e}-${t}`,vertA:e,vertB:t,weight:r,data:s};return this.edges.set(n.id,n),this.edgesByVertex.get(e)?.push(n),this.edgesByVertex.get(t)?.push(n),n}getEdgeBetween(e,t){return this.edges.get(`${e}-${t}`)||this.edges.get(`${t}-${e}`)||null}removeEdgeBetween(e,t){const r=this.getEdgeBetween(e,t);return r?(this.edges.delete(r.id),this.edgesByVertex.get(e)?.filter((e=>e.id!==r.id)),this.edgesByVertex.get(t)?.filter((e=>e.id!==r.id)),r):null}removeEdge(e){const t=this.edges.get(e);return t?(this.edges.delete(e),this.edgesByVertex.get(t.vertA)?.filter((t=>t.id!==e)),this.edgesByVertex.get(t.vertB)?.filter((t=>t.id!==e)),t):null}findPath(e,t,r="euclidian",s=null){const n=this.vertices.get(e),i=this.vertices.get(t);if(!i||!n)return{distance:1/0,path:[],found:!1};if(0===this.edgesByVertex.get(e)?.length||0===this.edgesByVertex.get(t)?.length)return{distance:1/0,path:[],found:!1};const a=[],o=new Set,c=new Map,h=new Map;h.set(n,0),a.push({value:n,fScore:this.heuristics[r](n,i)});let u=!1;for(;a.length;){const e=a.pop().value;if(s&&s.fillCircle(e.x,e.y,20),e.id===t)break;u=!1;const n=this.edgesByVertex.get(e.id)||[];for(const t of n){const s=this.vertices.get(t.vertA===e.id?t.vertB:t.vertA),n=(h.get(e)||0)+t.weight;if(n<(h.get(s)||1/0)){if(c.set(s,e),h.set(s,n),!o.has(s)){const t=.275*(i.x-e.x+i.y-e.y);a.push({value:s,fScore:n+this.heuristics[r](s,i)+t}),u=!0}o.add(s)}}u&&a.sort(((e,t)=>t.fScore-e.fScore))}const l=[];let d=i;for(;d&&d.id!==e;){if(!c.get(d))return{distance:1/0,path:[],found:!1};l.push(d),d=c.get(d)}l.push(n),l.reverse();const g=h.get(i);return g?{distance:g,path:l,found:!0}:{distance:1/0,path:[],found:!1}}heuristicEuclidian(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}heuristicManhattan(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}heuristicChebyshev(e,t){return Math.max(Math.abs(e.x-t.x),Math.abs(e.y-t.y))}heuristicOctile(e,t){const r=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);return Math.max(r,s)+.414*Math.min(r,s)}})})();