/*! For license information please see pathFinder.worker.4002a5a48d4f957bb460.bundle.worker.js.LICENSE.txt */
(()=>{"use strict";const e=Symbol("Comlink.proxy"),t=Symbol("Comlink.endpoint"),r=Symbol("Comlink.releaseProxy"),n=Symbol("Comlink.finalizer"),s=Symbol("Comlink.thrown"),i=e=>"object"==typeof e&&null!==e||"function"==typeof e,a=new Map([["proxy",{canHandle:t=>i(t)&&t[e],serialize(e){const{port1:t,port2:r}=new MessageChannel;return o(e,t),[r,[r]]},deserialize:e=>(e.start(),g(e,[],undefined))}],["throw",{canHandle:e=>i(e)&&s in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function o(t,r=globalThis,i=["*"]){r.addEventListener("message",(function a(u){if(!u||!u.data)return;if(!function(e,t){for(const r of e){if(t===r||"*"===r)return!0;if(r instanceof RegExp&&r.test(t))return!0}return!1}(i,u.origin))return void console.warn(`Invalid origin '${u.origin}' for comlink proxy`);const{id:h,type:l,path:d}=Object.assign({path:[]},u.data),g=(u.data.argumentList||[]).map(y);let f;try{const r=d.slice(0,-1).reduce(((e,t)=>e[t]),t),n=d.reduce(((e,t)=>e[t]),t);switch(l){case"GET":f=n;break;case"SET":r[d.slice(-1)[0]]=y(u.data.value),f=!0;break;case"APPLY":f=n.apply(r,g);break;case"CONSTRUCT":f=function(t){return Object.assign(t,{[e]:!0})}(new n(...g));break;case"ENDPOINT":{const{port1:e,port2:r}=new MessageChannel;o(t,r),f=function(e,t){return p.set(e,t),e}(e,[e])}break;case"RELEASE":f=void 0;break;default:return}}catch(e){f={value:e,[s]:0}}Promise.resolve(f).catch((e=>({value:e,[s]:0}))).then((e=>{const[s,i]=v(e);r.postMessage(Object.assign(Object.assign({},s),{id:h}),i),"RELEASE"===l&&(r.removeEventListener("message",a),c(r),n in t&&"function"==typeof t[n]&&t[n]())})).catch((e=>{const[t,n]=v({value:new TypeError("Unserializable return value"),[s]:0});r.postMessage(Object.assign(Object.assign({},t),{id:h}),n)}))})),r.start&&r.start()}function c(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function u(e){if(e)throw new Error("Proxy has been released and is not useable")}function h(e){return m(e,{type:"RELEASE"}).then((()=>{c(e)}))}const l=new WeakMap,d="FinalizationRegistry"in globalThis&&new FinalizationRegistry((e=>{const t=(l.get(e)||0)-1;l.set(e,t),0===t&&h(e)}));function g(e,n=[],s=function(){}){let i=!1;const a=new Proxy(s,{get(t,s){if(u(i),s===r)return()=>{!function(e){d&&d.unregister(e)}(a),h(e),i=!0};if("then"===s){if(0===n.length)return{then:()=>a};const t=m(e,{type:"GET",path:n.map((e=>e.toString()))}).then(y);return t.then.bind(t)}return g(e,[...n,s])},set(t,r,s){u(i);const[a,o]=v(s);return m(e,{type:"SET",path:[...n,r].map((e=>e.toString())),value:a},o).then(y)},apply(r,s,a){u(i);const o=n[n.length-1];if(o===t)return m(e,{type:"ENDPOINT"}).then(y);if("bind"===o)return g(e,n.slice(0,-1));const[c,h]=f(a);return m(e,{type:"APPLY",path:n.map((e=>e.toString())),argumentList:c},h).then(y)},construct(t,r){u(i);const[s,a]=f(r);return m(e,{type:"CONSTRUCT",path:n.map((e=>e.toString())),argumentList:s},a).then(y)}});return function(e,t){const r=(l.get(t)||0)+1;l.set(t,r),d&&d.register(e,t,e)}(a,e),a}function f(e){const t=e.map(v);return[t.map((e=>e[0])),(r=t.map((e=>e[1])),Array.prototype.concat.apply([],r))];var r}const p=new WeakMap;function v(e){for(const[t,r]of a)if(r.canHandle(e)){const[n,s]=r.serialize(e);return[{type:"HANDLER",name:t,value:n},s]}return[{type:"RAW",value:e},p.get(e)||[]]}function y(e){switch(e.type){case"HANDLER":return a.get(e.name).deserialize(e.value);case"RAW":return e.value}}function m(e,t,r){return new Promise((n=>{const s=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.addEventListener("message",(function t(r){r.data&&r.data.id&&r.data.id===s&&(e.removeEventListener("message",t),n(r.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:s},t),r)}))}o(new class{constructor(){this.vertices=new Map,this.edges=new Map,this.edgesByVertex=new Map,this.heuristics={euclidian:this.heuristicEuclidian,manhattan:this.heuristicManhattan,chebyshev:this.heuristicChebyshev,octile:this.heuristicOctile}}createVertex(e,t,r,n){if(this.vertices.has(e))throw new Error(`Vertex with id ${e} already exists`);const s={id:e,data:n,x:t,y:r};return this.vertices.set(e,s),this.edgesByVertex.set(e,[]),s}removeVertex(e){if(!this.vertices.delete(e))return!1;const t=this.edgesByVertex.get(e);return this.edgesByVertex.delete(e),!t||(t.forEach((e=>this.edges.delete(e.id))),!0)}removeAllVertices(){let e=!0;return this.vertices.forEach((t=>{this.removeVertex(t.id)||(e=!1)})),e&&0===this.vertices.size&&0===this.edges.size}getNeighbourVertices(e){const t=this.edgesByVertex.get(e);if(!t)return[];const r=[];return t.forEach((t=>{const n=t.vertA===e?t.vertB:t.vertA,s=this.vertices.get(n);s&&r.push(s)})),r}createEdge(e,t,r,n){var s,i;const a={id:`${e}-${t}`,vertA:e,vertB:t,weight:r,data:n};return this.edges.set(a.id,a),null===(s=this.edgesByVertex.get(e))||void 0===s||s.push(a),null===(i=this.edgesByVertex.get(t))||void 0===i||i.push(a),a}getEdgeBetween(e,t){return this.edges.get(`${e}-${t}`)||this.edges.get(`${t}-${e}`)||null}removeEdgeBetween(e,t){var r,n;const s=this.getEdgeBetween(e,t);return s?(this.edges.delete(s.id),null===(r=this.edgesByVertex.get(e))||void 0===r||r.filter((e=>e.id!==s.id)),null===(n=this.edgesByVertex.get(t))||void 0===n||n.filter((e=>e.id!==s.id)),s):null}removeEdge(e){var t,r;const n=this.edges.get(e);return n?(this.edges.delete(e),null===(t=this.edgesByVertex.get(n.vertA))||void 0===t||t.filter((t=>t.id!==e)),null===(r=this.edgesByVertex.get(n.vertB))||void 0===r||r.filter((t=>t.id!==e)),n):null}findPath(e,t,r="euclidian",n=null){var s,i;const a=this.vertices.get(e),o=this.vertices.get(t);if(!o||!a)return{distance:1/0,path:[],found:!1};if(0===(null===(s=this.edgesByVertex.get(e))||void 0===s?void 0:s.length)||0===(null===(i=this.edgesByVertex.get(t))||void 0===i?void 0:i.length))return{distance:1/0,path:[],found:!1};const c=[],u=new Set,h=new Map,l=new Map;l.set(a,0),c.push({value:a,fScore:this.heuristics[r](a,o)});let d=!1;for(;c.length;){const e=c.pop().value;if(n&&n.fillCircle(e.x,e.y,20),e.id===t)break;d=!1;const s=this.edgesByVertex.get(e.id)||[];for(const t of s){const n=this.vertices.get(t.vertA===e.id?t.vertB:t.vertA),s=(l.get(e)||0)+t.weight;if(s<(l.get(n)||1/0)){if(h.set(n,e),l.set(n,s),!u.has(n)){const t=.275*(o.x-e.x+o.y-e.y);c.push({value:n,fScore:s+this.heuristics[r](n,o)+t}),d=!0}u.add(n)}}d&&c.sort(((e,t)=>t.fScore-e.fScore))}const g=[];let f=o;for(;f&&f.id!==e;){if(!h.get(f))return{distance:1/0,path:[],found:!1};g.push(f),f=h.get(f)}g.push(a),g.reverse();const p=l.get(o);return p?{distance:p,path:g,found:!0}:{distance:1/0,path:[],found:!1}}heuristicEuclidian(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}heuristicManhattan(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}heuristicChebyshev(e,t){return Math.max(Math.abs(e.x-t.x),Math.abs(e.y-t.y))}heuristicOctile(e,t){const r=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return Math.max(r,n)+.414*Math.min(r,n)}})})();